<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>‚≠ê Cute Star Dash ‚≠ê</title>
<style>
  body {
    margin: 0;
    background: linear-gradient(#ffe6f0, #e6f7ff);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    font-family: "Arial", sans-serif;
    font-weight: bold;
  }

  canvas {
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.2);
  }

  .hint {
    position: fixed;
    bottom: 60px;
    font-size: 14px;
    opacity: 0.8;
    text-align: center;
    width: 100%;
    font-weight: bold;
  }

  .credits {
    position: fixed;
    bottom: 35px;
    font-size: 12px;
    opacity: 0.7;
    text-align: center;
    width: 100%;
    font-weight: bold;
  }

  .leaderboard {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(255,255,255,0.9);
    padding: 10px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: bold;
    text-align: left;
  }
</style>
</head>
<body>

<canvas id="game" width="480" height="480"></canvas>
<div class="hint">Move with ‚¨ÖÔ∏è‚¨ÜÔ∏è‚¨áÔ∏è‚û°Ô∏è | Collect ‚≠ê | Avoid üòà</div>
<div class="credits">Made by Joshua | Instagram: @jshctz.mp3</div>
<div class="leaderboard" id="leaderboard"></div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const leaderboardDiv = document.getElementById("leaderboard");

let player = { x: 240, y: 240, r: 14, speed: 4, color: "#6bcfff" };
let stars = [];
let enemies = [];
let balls = []; // collected balls
let score = 0;
let level = 1;
let keys = {};
let nextBallScore = 10;
let ballColors = ["#ff69b4", "#6a5acd", "#ff8c00", "#00fa9a", "#ff1493", "#1e90ff", "#ffa500", "#00ffff", "#adff2f", "#ff4500"];
let leaderboard = JSON.parse(localStorage.getItem("leaderboard") || "[]");

document.addEventListener("keydown", e => keys[e.key] = true);
document.addEventListener("keyup", e => keys[e.key] = false);

function spawnStar() {
  stars.push({
    x: Math.random() * 440 + 20,
    y: Math.random() * 440 + 20,
    r: 8
  });
}

function spawnEnemy() {
  enemies.push({
    x: Math.random() * 440 + 20,
    y: Math.random() * 440 + 20,
    r: 14,
    vx: (Math.random() - 0.5) * (1 + level * 0.3),
    vy: (Math.random() - 0.5) * (1 + level * 0.3)
  });
}

spawnStar();
spawnEnemy();

function distance(a, b) {
  return Math.hypot(a.x - b.x, a.y - b.y);
}

function update() {
  if (keys["ArrowUp"]) player.y -= player.speed;
  if (keys["ArrowDown"]) player.y += player.speed;
  if (keys["ArrowLeft"]) player.x -= player.speed;
  if (keys["ArrowRight"]) player.x += player.speed;

  player.x = Math.max(player.r, Math.min(480 - player.r, player.x));
  player.y = Math.max(player.r, Math.min(480 - player.r, player.y));

  // collect stars
  stars.forEach((s, i) => {
    if (distance(player, s) < player.r + s.r) {
      stars.splice(i, 1);
      score++;
      spawnStar();

      // increase level every 5 points
      if (score % 5 === 0) {
        level++;
        spawnEnemy();
      }

      // collect new ball every 10 points
      if (score >= nextBallScore && nextBallScore <= 100) {
        let colorIndex = Math.floor(nextBallScore / 10) - 1;
        let newBall = { color: ballColors[colorIndex % ballColors.length] };
        balls.push(newBall);
        player.color = newBall.color; // equip new ball
        alert(`üéâ You unlocked a new ball! Color: ${newBall.color}`);
        nextBallScore += 10;
      }

      // leaderboard at 100 points
      if (score >= 100) {
        let name = prompt("üèÜ You reached 100! Enter your name for the leaderboard:");
        if (name) {
          leaderboard.push({ name: name, score: score });
          localStorage.setItem("leaderboard", JSON.stringify(leaderboard));
        }
      }
    }
  });

  // enemies
  enemies.forEach(e => {
    e.x += e.vx;
    e.y += e.vy;

    if (e.x < e.r || e.x > 480 - e.r) e.vx *= -1;
    if (e.y < e.r || e.y > 480 - e.r) e.vy *= -1;

    if (distance(player, e) < player.r + e.r) {
      alert("üíÄ Game Over!\nScore: " + score);
      location.reload();
    }
  });
}

function drawCircle(x, y, r, color) {
  ctx.beginPath();
  ctx.arc(x, y, r, 0, Math.PI * 2);
  ctx.fillStyle = color;
  ctx.fill();
}

function draw() {
  ctx.clearRect(0, 0, 480, 480);

  // stars
  stars.forEach(s => drawCircle(s.x, s.y, s.r, "#ffd700"));

  // enemies
  enemies.forEach(e => drawCircle(e.x, e.y, e.r, "#ff6b6b"));

  // player with equipped ball color
  drawCircle(player.x, player.y, player.r, player.color);

  ctx.fillStyle = "#444";
  ctx.font = "bold 16px Arial";
  ctx.fillText("‚≠ê Score: " + score, 15, 25);
  ctx.fillText("üå∏ Level: " + level, 370, 25);

  // display leaderboard in canvas (optional)
  let lbY = 50;
  ctx.fillStyle = "#000";
  ctx.font = "bold 12px Arial";
  leaderboard.forEach(entry => {
    ctx.fillText(`${entry.name}: ${entry.score}`, 350, lbY);
    lbY += 15;
  });
}

function updateLeaderboardDiv() {
  if (leaderboard.length === 0) return;
  leaderboardDiv.innerHTML = "<b>Leaderboard</b><br>" + leaderboard
    .sort((a,b) => b.score - a.score)
    .map(e => `${e.name}: ${e.score}`)
    .join("<br>");
}

function loop() {
  update();
  draw();
  updateLeaderboardDiv();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>

